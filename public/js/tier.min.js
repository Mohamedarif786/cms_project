function uncheck(e){$(`#tierList #${e}`).click((function(){$(this).checked||$("#checkAll").attr("checked",!1)}))}function tierList(e,t,i){$("#tierList").empty(),$("#loader").show(),$.post("/tierList",{name:e,description:t,status:""===i?void 0:i},(function(e){if(e.length)$.get("/templates/tier_item.html",(function(t){$.each(e,(function(e,i){$.tmpl(t,i).appendTo("#tierList")})),$("#loader").hide()}));else{$("#norecords").html('<td colspan="4" align="center">No Records found</td>'),$("#loader").hide()}}))}async function bulkDelete(){$("#loader").show();let e=$.find("#tierList tr input[name='cbRow']"),t=[];if($(e).each((function(){if(this.checked){let e=parseInt($(this).data("id"));t.push(e)}})),t.length){let e=await Promise.all(t.map((async e=>{const t=await fetch("/removeRole",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleid:e})});let i=await t.json();if(i.data&&i.data.removerole)return e})));t.length-e.length==0?(notify("Roles deleted successfully","success"),tierList()):notify("Unable to delete role(s)","error"),$("#loader").hide()}$("#deleteDialog").modal("hide")}async function bulkActive(){$("#loader").show();let e=$.find("#tierList tr input[name='cbRow']"),t=[];if($(e).each((function(){if(this.checked){let e=parseInt($(this).data("id"));t.push(e)}})),t.length){let e=await Promise.all(t.map((async e=>{const t=await fetch("/activeRole",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});let i=await t.json();if(i.data&&i.data.activerole)return e})));t.length-e.length==0?(notify("Roles activated successfully","success"),tierList()):notify("Unable to activate role(s)","error"),$("#loader").hide()}$("#activeDialog").modal("hide")}async function bulkInactive(){$("#loader").show();let e=$.find("#tierList tr input[name='cbRow']"),t=[];if($(e).each((function(){if(this.checked){let e=parseInt($(this).data("id"));t.push(e)}})),t.length){let e=await Promise.all(t.map((async e=>{const t=await fetch("/inactiveRole",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});let i=await t.json();if(i.data&&i.data.inactiverole)return e})));t.length-e.length==0?(notify("Roles deactivated successfully","success"),tierList()):notify("Unable to deactivate role(s)","error"),$("#loader").hide()}$("#inactiveDialog").modal("hide")}function singleDelete(e){$("#loader").show(),$.post("/removeRole",{roleid:e},(function(e){$("#loader").hide(),e.data&&e.data.removerole?notify(e.data.removerole.message,"success"):notify(e.errors[0].message,"error"),tierList()})),$("#loader").hide(),$("#deleteDialog").modal("hide")}function updateRow(e,t,i){$("#roleModal .modal-title").html("Update Role"),$("#roleModal #roleId").val(e),$("#roleModal #name").val(t),$("#roleModal #description").val(i),$("#roleModal").modal("show")}function deleteRow(e,t){$("#list").empty(),$("#list").append(`<li data-id="${e}">${t}</li>`),$("#deleteDialog .modal-title").html("Delete Role"),$("#deleteDialog #bdelete").click((()=>{singleDelete(e)})),$("#deleteDialog").modal("show")}$(document).ready((function(){tierList(),$("#tierModal").on("shown.bs.modal",(function(){$("#name").focus()})),$("#AddNewTier").click((function(){$("#tierModal #roleId").val(""),$("#tierModal #name").val(""),$("#tierModal #description").val(""),$("#tierModal").modal("show")})),$("#ActiveTier").click((function(){let e=$.find("#tierList tr input[name='cbRow']");$("#activeDialog #list").empty();let t=0;$(e).each((function(){this.checked&&(t++,$("#activeDialog #list").append(`<li data-id="${$(this).data("id")}">${$(this).data("name")}</li>`))})),t>0?($("#activeDialog .modal-title").html("Active Tiers"),$("#activeDialog #bactive").click((()=>{bulkActive()})),$("#activeDialog").modal("show")):notify("Tier(s) not selected","warning")})),$("#InactiveTier").click((function(){let e=$.find("#tierList tr input[name='cbRow']");$("#inactiveDialog #list").empty();let t=0;$(e).each((function(){this.checked&&(t++,$("#inactiveDialog #list").append(`<li data-id="${$(this).data("id")}">${$(this).data("name")}</li>`))})),t>0?($("#inactiveDialog .modal-title").html("Inactive Tiers"),$("#inactiveDialog #binactive").click((()=>{bulkInactive()})),$("#inactiveDialog").modal("show")):notify("Tier(s) not selected","warning")})),$("#Save").click((function(){let e=$("#newForm")[0].checkValidity();if(e){$("#loader").show();let e={name:$("#name").val().toUpperCase(),description:$("#description").val(),status:"ACTIVE"};""!==$("#tierId").val()?(e.id=$("#roleId").val(),$.post("/updateRole",e,(function(e){e.data?e.data.updaterole.success?notify(e.data.updaterole.message,"success"):notify(e.data.updaterole.message,"error"):notify(e.errors[0].message,"error"),$("#loader").hide(),$("#roleModal").modal("hide"),tierList()}))):$.post("/addrole",e,(function(e){e.data?e.data.addrole.success?notify(e.data.addrole.message,"success"):notify(e.data.addrole.message,"error"):notify(e.errors[0].message,"error"),$("#loader").hide(),$("#roleModal").modal("hide"),tierList()}))}return $("#newForm")[0].classList.add("was-validated"),e})),$(".closeAll").click((function(){$("#name").val(""),$("#newRoleForm")[0].classList.remove("was-validated")})),$("#deleteAll").click((()=>{let e=$.find("#tierList tr input[name='cbRow']");$("#list").empty();let t=0;$(e).each((function(){this.checked&&(t++,$("#list").append(`<li data-id="${$(this).data("id")}">${$(this).data("name")}</li>`))})),t>0?($("#deleteDialog .modal-title").html("Delete Roles"),$("#deleteDialog #bdelete").click((()=>{bulkDelete()})),$("#deleteDialog").modal("show")):notify("Role(s) not selected","warning")})),$("#tablerecords #ByName").change((function(){tierList($(this).val())})),$("#tablerecords #ByDescription").change((function(){tierList(void 0,$(this).val())})),$("#tablerecords #ByStatus").change((function(){tierList(void 0,void 0,$(this).val())}))})),$("#checkAll").click((function(){$("input:checkbox").not("#flexSwitchCheckDefault").prop("checked",this.checked)}));